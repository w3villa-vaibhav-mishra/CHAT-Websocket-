{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (g && (g = 0, op[0] && (_ = 0)), _) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useWebSocket = void 0;\nvar react_1 = require(\"react\");\nvar react_dom_1 = require(\"react-dom\");\nvar constants_1 = require(\"./constants\");\nvar create_or_join_1 = require(\"./create-or-join\");\nvar get_url_1 = require(\"./get-url\");\nvar proxy_1 = __importDefault(require(\"./proxy\"));\nvar util_1 = require(\"./util\");\nvar useWebSocket = function (url, options, connect) {\n  if (options === void 0) {\n    options = constants_1.DEFAULT_OPTIONS;\n  }\n  if (connect === void 0) {\n    connect = true;\n  }\n  var _a = (0, react_1.useState)(null),\n    lastMessage = _a[0],\n    setLastMessage = _a[1];\n  var _b = (0, react_1.useState)({}),\n    readyState = _b[0],\n    setReadyState = _b[1];\n  var lastJsonMessage = (0, react_1.useMemo)(function () {\n    if (!options.disableJson && lastMessage) {\n      try {\n        return JSON.parse(lastMessage.data);\n      } catch (e) {\n        return constants_1.UNPARSABLE_JSON_OBJECT;\n      }\n    }\n    return null;\n  }, [lastMessage, options.disableJson]);\n  var convertedUrl = (0, react_1.useRef)(null);\n  var webSocketRef = (0, react_1.useRef)(null);\n  var startRef = (0, react_1.useRef)(function () {\n    return void 0;\n  });\n  var reconnectCount = (0, react_1.useRef)(0);\n  var lastMessageTime = (0, react_1.useRef)(Date.now());\n  var messageQueue = (0, react_1.useRef)([]);\n  var webSocketProxy = (0, react_1.useRef)(null);\n  var optionsCache = (0, react_1.useRef)(options);\n  optionsCache.current = options;\n  var readyStateFromUrl = convertedUrl.current && readyState[convertedUrl.current] !== undefined ? readyState[convertedUrl.current] : url !== null && connect === true ? constants_1.ReadyState.CONNECTING : constants_1.ReadyState.UNINSTANTIATED;\n  var stringifiedQueryParams = options.queryParams ? JSON.stringify(options.queryParams) : null;\n  var sendMessage = (0, react_1.useCallback)(function (message, keep) {\n    var _a;\n    if (keep === void 0) {\n      keep = true;\n    }\n    if (constants_1.isEventSourceSupported && webSocketRef.current instanceof EventSource) {\n      console.warn('Unable to send a message from an eventSource');\n      return;\n    }\n    if (((_a = webSocketRef.current) === null || _a === void 0 ? void 0 : _a.readyState) === constants_1.ReadyState.OPEN) {\n      (0, util_1.assertIsWebSocket)(webSocketRef.current, optionsCache.current.skipAssert);\n      webSocketRef.current.send(message);\n    } else if (keep) {\n      messageQueue.current.push(message);\n    }\n  }, []);\n  var sendJsonMessage = (0, react_1.useCallback)(function (message, keep) {\n    if (keep === void 0) {\n      keep = true;\n    }\n    sendMessage(JSON.stringify(message), keep);\n  }, [sendMessage]);\n  var getWebSocket = (0, react_1.useCallback)(function () {\n    if (optionsCache.current.share !== true || constants_1.isEventSourceSupported && webSocketRef.current instanceof EventSource) {\n      return webSocketRef.current;\n    }\n    if (webSocketProxy.current === null && webSocketRef.current) {\n      (0, util_1.assertIsWebSocket)(webSocketRef.current, optionsCache.current.skipAssert);\n      webSocketProxy.current = (0, proxy_1.default)(webSocketRef.current, startRef);\n    }\n    return webSocketProxy.current;\n  }, []);\n  (0, react_1.useEffect)(function () {\n    if (url !== null && connect === true) {\n      var removeListeners_1;\n      var expectClose_1 = false;\n      var createOrJoin_1 = true;\n      var start_1 = function () {\n        return __awaiter(void 0, void 0, void 0, function () {\n          var _a, protectedSetLastMessage, protectedSetReadyState;\n          return __generator(this, function (_b) {\n            switch (_b.label) {\n              case 0:\n                _a = convertedUrl;\n                return [4 /*yield*/, (0, get_url_1.getUrl)(url, optionsCache)];\n              case 1:\n                _a.current = _b.sent();\n                if (convertedUrl.current === null) {\n                  console.error('Failed to get a valid URL. WebSocket connection aborted.');\n                  convertedUrl.current = 'ABORTED';\n                  (0, react_dom_1.flushSync)(function () {\n                    return setReadyState(function (prev) {\n                      return __assign(__assign({}, prev), {\n                        ABORTED: constants_1.ReadyState.CLOSED\n                      });\n                    });\n                  });\n                  return [2 /*return*/];\n                }\n                protectedSetLastMessage = function (message) {\n                  if (!expectClose_1) {\n                    (0, react_dom_1.flushSync)(function () {\n                      return setLastMessage(message);\n                    });\n                  }\n                };\n                protectedSetReadyState = function (state) {\n                  if (!expectClose_1) {\n                    (0, react_dom_1.flushSync)(function () {\n                      return setReadyState(function (prev) {\n                        var _a;\n                        return __assign(__assign({}, prev), convertedUrl.current && (_a = {}, _a[convertedUrl.current] = state, _a));\n                      });\n                    });\n                  }\n                };\n                if (createOrJoin_1) {\n                  removeListeners_1 = (0, create_or_join_1.createOrJoinSocket)(webSocketRef, convertedUrl.current, protectedSetReadyState, optionsCache, protectedSetLastMessage, startRef, reconnectCount, lastMessageTime, sendMessage);\n                }\n                return [2 /*return*/];\n            }\n          });\n        });\n      };\n      startRef.current = function () {\n        if (!expectClose_1) {\n          if (webSocketProxy.current) webSocketProxy.current = null;\n          removeListeners_1 === null || removeListeners_1 === void 0 ? void 0 : removeListeners_1();\n          start_1();\n        }\n      };\n      start_1();\n      return function () {\n        expectClose_1 = true;\n        createOrJoin_1 = false;\n        if (webSocketProxy.current) webSocketProxy.current = null;\n        removeListeners_1 === null || removeListeners_1 === void 0 ? void 0 : removeListeners_1();\n        setLastMessage(null);\n      };\n    } else if (url === null || connect === false) {\n      reconnectCount.current = 0; // reset reconnection attempts\n      setReadyState(function (prev) {\n        var _a;\n        return __assign(__assign({}, prev), convertedUrl.current && (_a = {}, _a[convertedUrl.current] = constants_1.ReadyState.CLOSED, _a));\n      });\n    }\n  }, [url, connect, stringifiedQueryParams, sendMessage]);\n  (0, react_1.useEffect)(function () {\n    if (readyStateFromUrl === constants_1.ReadyState.OPEN) {\n      messageQueue.current.splice(0).forEach(function (message) {\n        sendMessage(message);\n      });\n    }\n  }, [readyStateFromUrl]);\n  return {\n    sendMessage: sendMessage,\n    sendJsonMessage: sendJsonMessage,\n    lastMessage: lastMessage,\n    lastJsonMessage: lastJsonMessage,\n    readyState: readyStateFromUrl,\n    getWebSocket: getWebSocket\n  };\n};\nexports.useWebSocket = useWebSocket;","map":{"version":3,"names":["react_1","require","react_dom_1","constants_1","create_or_join_1","get_url_1","proxy_1","__importDefault","util_1","useWebSocket","url","options","connect","DEFAULT_OPTIONS","_a","useState","lastMessage","setLastMessage","_b","readyState","setReadyState","lastJsonMessage","useMemo","disableJson","JSON","parse","data","e","UNPARSABLE_JSON_OBJECT","convertedUrl","useRef","webSocketRef","startRef","reconnectCount","lastMessageTime","Date","now","messageQueue","webSocketProxy","optionsCache","current","readyStateFromUrl","undefined","ReadyState","CONNECTING","UNINSTANTIATED","stringifiedQueryParams","queryParams","stringify","sendMessage","useCallback","message","keep","isEventSourceSupported","EventSource","console","warn","OPEN","assertIsWebSocket","skipAssert","send","push","sendJsonMessage","getWebSocket","share","default","useEffect","removeListeners_1","expectClose_1","createOrJoin_1","start_1","__awaiter","getUrl","sent","error","flushSync","prev","__assign","ABORTED","CLOSED","protectedSetLastMessage","protectedSetReadyState","state","createOrJoinSocket","splice","forEach","exports"],"sources":["/home/vaibav/project/chat-app/node_modules/react-use-websocket/src/lib/use-websocket.ts"],"sourcesContent":["import { useEffect, useRef, useState, useCallback, useMemo } from 'react';\nimport { flushSync } from 'react-dom';\nimport { DEFAULT_OPTIONS, isEventSourceSupported, ReadyState, UNPARSABLE_JSON_OBJECT } from './constants';\nimport { createOrJoinSocket } from './create-or-join';\nimport { getUrl } from './get-url';\nimport websocketWrapper from './proxy';\nimport {\n  Options,\n  ReadyStateState,\n  SendMessage,\n  SendJsonMessage,\n  WebSocketMessage,\n  WebSocketHook,\n  WebSocketLike,\n} from './types';\nimport { assertIsWebSocket } from './util';\n\nexport const useWebSocket = <T = unknown>(\n  url: string | (() => string | Promise<string>) | null,\n  options: Options = DEFAULT_OPTIONS,\n  connect: boolean = true,\n): WebSocketHook<T> => {\n  const [lastMessage, setLastMessage] = useState<WebSocketEventMap['message'] | null>(null);\n  const [readyState, setReadyState] = useState<ReadyStateState>({});\n  const lastJsonMessage: T = useMemo(() => {\n    if (!options.disableJson && lastMessage) {\n      try {\n        return JSON.parse(lastMessage.data);\n      } catch (e) {\n        return UNPARSABLE_JSON_OBJECT;\n      }\n    }\n    return null;\n  }, [lastMessage, options.disableJson]);\n  const convertedUrl = useRef<string | null>(null);\n  const webSocketRef = useRef<WebSocketLike | null>(null);\n  const startRef = useRef<() => void>(() => void 0);\n  const reconnectCount = useRef<number>(0);\n  const lastMessageTime = useRef<number>(Date.now());\n  const messageQueue = useRef<WebSocketMessage[]>([]);\n  const webSocketProxy = useRef<WebSocketLike | null>(null);\n  const optionsCache = useRef<Options>(options);\n  optionsCache.current = options;\n\n  const readyStateFromUrl: ReadyState =\n    convertedUrl.current && readyState[convertedUrl.current] !== undefined ?\n      readyState[convertedUrl.current] :\n      url !== null && connect === true ?\n        ReadyState.CONNECTING :\n        ReadyState.UNINSTANTIATED;\n\n  const stringifiedQueryParams = options.queryParams ? JSON.stringify(options.queryParams) : null;\n\n  const sendMessage: SendMessage = useCallback((message, keep = true) => {\n    if (isEventSourceSupported && webSocketRef.current instanceof EventSource) {\n      console.warn('Unable to send a message from an eventSource');\n      return;\n    }\n\n    if (webSocketRef.current?.readyState === ReadyState.OPEN) {\n      assertIsWebSocket(webSocketRef.current, optionsCache.current.skipAssert);\n      webSocketRef.current.send(message);\n    } else if (keep) {\n      messageQueue.current.push(message);\n    }\n  }, []);\n\n  const sendJsonMessage: SendJsonMessage = useCallback((message, keep = true) => {\n    sendMessage(JSON.stringify(message), keep);\n  }, [sendMessage]);\n\n  const getWebSocket = useCallback(() => {\n    if (optionsCache.current.share !== true || (isEventSourceSupported && webSocketRef.current instanceof EventSource)) {\n      return webSocketRef.current;\n    }\n\n    if (webSocketProxy.current === null && webSocketRef.current) {\n      assertIsWebSocket(webSocketRef.current, optionsCache.current.skipAssert);\n      webSocketProxy.current = websocketWrapper(webSocketRef.current, startRef);\n    }\n\n    return webSocketProxy.current;\n  }, []);\n\n  useEffect(() => {\n    if (url !== null && connect === true) {\n      let removeListeners: () => void;\n      let expectClose = false;\n      let createOrJoin = true;\n\n      const start = async () => {\n        convertedUrl.current = await getUrl(url, optionsCache);\n\n        if (convertedUrl.current === null) {\n          console.error('Failed to get a valid URL. WebSocket connection aborted.');\n          convertedUrl.current = 'ABORTED';\n          flushSync(() => setReadyState(prev => ({\n            ...prev,\n            ABORTED: ReadyState.CLOSED,\n          })));\n\n          return;\n        }\n\n        const protectedSetLastMessage = (message: WebSocketEventMap['message']) => {\n          if (!expectClose) {\n            flushSync(() => setLastMessage(message));\n          }\n        };\n\n        const protectedSetReadyState = (state: ReadyState) => {\n          if (!expectClose) {\n            flushSync(() => setReadyState(prev => ({\n              ...prev,\n              ...(convertedUrl.current && { [convertedUrl.current]: state }),\n            })));\n          }\n        };\n\n        if (createOrJoin) {\n          removeListeners = createOrJoinSocket(\n            webSocketRef,\n            convertedUrl.current,\n            protectedSetReadyState,\n            optionsCache,\n            protectedSetLastMessage,\n            startRef,\n            reconnectCount,\n            lastMessageTime,\n            sendMessage,\n          );\n        }\n      };\n\n      startRef.current = () => {\n        if (!expectClose) {\n          if (webSocketProxy.current) webSocketProxy.current = null;\n          removeListeners?.();\n          start();\n        }\n      };\n\n      start();\n      return () => {\n        expectClose = true;\n        createOrJoin = false;\n        if (webSocketProxy.current) webSocketProxy.current = null;\n        removeListeners?.();\n        setLastMessage(null);\n      };\n    } else if (url === null || connect === false) {\n      reconnectCount.current = 0; // reset reconnection attempts\n      setReadyState(prev => ({\n        ...prev,\n        ...(convertedUrl.current && { [convertedUrl.current]: ReadyState.CLOSED }),\n      }));\n    }\n  }, [url, connect, stringifiedQueryParams, sendMessage]);\n\n  useEffect(() => {\n    if (readyStateFromUrl === ReadyState.OPEN) {\n      messageQueue.current.splice(0).forEach(message => {\n        sendMessage(message);\n      });\n    }\n  }, [readyStateFromUrl]);\n\n  return {\n    sendMessage,\n    sendJsonMessage,\n    lastMessage,\n    lastJsonMessage,\n    readyState: readyStateFromUrl,\n    getWebSocket,\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}