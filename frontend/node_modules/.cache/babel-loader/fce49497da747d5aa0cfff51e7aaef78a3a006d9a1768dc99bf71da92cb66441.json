{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setUpSocketIOPing = exports.appendQueryParams = exports.parseSocketIOUrl = void 0;\nvar constants_1 = require(\"./constants\");\nvar parseSocketIOUrl = function (url) {\n  if (url) {\n    var isSecure = /^https|wss/.test(url);\n    var strippedProtocol = url.replace(/^(https?|wss?)(:\\/\\/)?/, '');\n    var removedFinalBackSlack = strippedProtocol.replace(/\\/$/, '');\n    var protocol = isSecure ? 'wss' : 'ws';\n    return \"\".concat(protocol, \"://\").concat(removedFinalBackSlack).concat(constants_1.SOCKET_IO_PATH);\n  } else if (url === '') {\n    var isSecure = /^https/.test(window.location.protocol);\n    var protocol = isSecure ? 'wss' : 'ws';\n    var port = window.location.port ? \":\".concat(window.location.port) : '';\n    return \"\".concat(protocol, \"://\").concat(window.location.hostname).concat(port).concat(constants_1.SOCKET_IO_PATH);\n  }\n  return url;\n};\nexports.parseSocketIOUrl = parseSocketIOUrl;\nvar appendQueryParams = function (url, params) {\n  if (params === void 0) {\n    params = {};\n  }\n  var hasParamsRegex = /\\?([\\w]+=[\\w]+)/;\n  var alreadyHasParams = hasParamsRegex.test(url);\n  var stringified = \"\".concat(Object.entries(params).reduce(function (next, _a) {\n    var key = _a[0],\n      value = _a[1];\n    return next + \"\".concat(key, \"=\").concat(value, \"&\");\n  }, '').slice(0, -1));\n  return \"\".concat(url).concat(alreadyHasParams ? '&' : '?').concat(stringified);\n};\nexports.appendQueryParams = appendQueryParams;\nvar setUpSocketIOPing = function (sendMessage, interval) {\n  if (interval === void 0) {\n    interval = constants_1.SOCKET_IO_PING_INTERVAL;\n  }\n  var ping = function () {\n    return sendMessage(constants_1.SOCKET_IO_PING_CODE);\n  };\n  return window.setInterval(ping, interval);\n};\nexports.setUpSocketIOPing = setUpSocketIOPing;","map":{"version":3,"names":["constants_1","require","parseSocketIOUrl","url","isSecure","test","strippedProtocol","replace","removedFinalBackSlack","protocol","concat","SOCKET_IO_PATH","window","location","port","hostname","exports","appendQueryParams","params","hasParamsRegex","alreadyHasParams","stringified","Object","entries","reduce","next","_a","key","value","slice","setUpSocketIOPing","sendMessage","interval","SOCKET_IO_PING_INTERVAL","ping","SOCKET_IO_PING_CODE","setInterval"],"sources":["/home/vaibav/project/chat-app/node_modules/react-use-websocket/src/lib/socket-io.ts"],"sourcesContent":["import { SOCKET_IO_PING_INTERVAL, SOCKET_IO_PATH, SOCKET_IO_PING_CODE } from './constants';\nimport { QueryParams, SendMessage } from './types';\n\nexport const parseSocketIOUrl = (url: string) => {\n  if (url) {\n    const isSecure = /^https|wss/.test(url);\n    const strippedProtocol = url.replace(/^(https?|wss?)(:\\/\\/)?/, '');\n    const removedFinalBackSlack = strippedProtocol.replace(/\\/$/, '');\n    const protocol = isSecure ? 'wss' : 'ws';\n\n    return `${protocol}://${removedFinalBackSlack}${SOCKET_IO_PATH}`;\n  } else if (url === '') {\n    const isSecure = /^https/.test(window.location.protocol);\n    const protocol = isSecure ? 'wss' : 'ws';\n    const port = window.location.port ? `:${window.location.port}` : '';\n\n    return `${protocol}://${window.location.hostname}${port}${SOCKET_IO_PATH}`;\n  }\n\n  return url;\n};\n\nexport const appendQueryParams = (url: string, params: QueryParams = {}): string => {\n  const hasParamsRegex = /\\?([\\w]+=[\\w]+)/;\n  const alreadyHasParams = hasParamsRegex.test(url);\n\n  const stringified = `${Object.entries(params).reduce((next, [key, value]) => {\n    return next + `${key}=${value}&`;\n  }, '').slice(0, -1)}`;\n\n  return `${url}${alreadyHasParams ? '&' : '?'}${stringified}`;\n};\n\nexport const setUpSocketIOPing = (sendMessage: SendMessage, interval = SOCKET_IO_PING_INTERVAL) => {\n  const ping = () => sendMessage(SOCKET_IO_PING_CODE);\n\n  return window.setInterval(ping, interval);\n};\n"],"mappings":";;;;;;AAAA,IAAAA,WAAA,GAAAC,OAAA;AAGO,IAAMC,gBAAgB,GAAG,SAAAA,CAACC,GAAW;EAC1C,IAAIA,GAAG,EAAE;IACP,IAAMC,QAAQ,GAAG,YAAY,CAACC,IAAI,CAACF,GAAG,CAAC;IACvC,IAAMG,gBAAgB,GAAGH,GAAG,CAACI,OAAO,CAAC,wBAAwB,EAAE,EAAE,CAAC;IAClE,IAAMC,qBAAqB,GAAGF,gBAAgB,CAACC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;IACjE,IAAME,QAAQ,GAAGL,QAAQ,GAAG,KAAK,GAAG,IAAI;IAExC,OAAO,GAAAM,MAAA,CAAGD,QAAQ,SAAAC,MAAA,CAAMF,qBAAqB,EAAAE,MAAA,CAAGV,WAAA,CAAAW,cAAc,CAAE;EAClE,CAAC,MAAM,IAAIR,GAAG,KAAK,EAAE,EAAE;IACrB,IAAMC,QAAQ,GAAG,QAAQ,CAACC,IAAI,CAACO,MAAM,CAACC,QAAQ,CAACJ,QAAQ,CAAC;IACxD,IAAMA,QAAQ,GAAGL,QAAQ,GAAG,KAAK,GAAG,IAAI;IACxC,IAAMU,IAAI,GAAGF,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,IAAAJ,MAAA,CAAIE,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAE,GAAG,EAAE;IAEnE,OAAO,GAAAJ,MAAA,CAAGD,QAAQ,SAAAC,MAAA,CAAME,MAAM,CAACC,QAAQ,CAACE,QAAQ,EAAAL,MAAA,CAAGI,IAAI,EAAAJ,MAAA,CAAGV,WAAA,CAAAW,cAAc,CAAE;EAC5E;EAEA,OAAOR,GAAG;AACZ,CAAC;AAjBYa,OAAA,CAAAd,gBAAgB,GAAAA,gBAAA;AAmBtB,IAAMe,iBAAiB,GAAG,SAAAA,CAACd,GAAW,EAAEe,MAAwB;EAAxB,IAAAA,MAAA;IAAAA,MAAA,KAAwB;EAAA;EACrE,IAAMC,cAAc,GAAG,iBAAiB;EACxC,IAAMC,gBAAgB,GAAGD,cAAc,CAACd,IAAI,CAACF,GAAG,CAAC;EAEjD,IAAMkB,WAAW,GAAG,GAAAX,MAAA,CAAGY,MAAM,CAACC,OAAO,CAACL,MAAM,CAAC,CAACM,MAAM,CAAC,UAACC,IAAI,EAAEC,EAAY;QAAXC,GAAG,GAAAD,EAAA;MAAEE,KAAK,GAAAF,EAAA;IACrE,OAAOD,IAAI,GAAG,GAAAf,MAAA,CAAGiB,GAAG,OAAAjB,MAAA,CAAIkB,KAAK,MAAG;EAClC,CAAC,EAAE,EAAE,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAE;EAErB,OAAO,GAAAnB,MAAA,CAAGP,GAAG,EAAAO,MAAA,CAAGU,gBAAgB,GAAG,GAAG,GAAG,GAAG,EAAAV,MAAA,CAAGW,WAAW,CAAE;AAC9D,CAAC;AATYL,OAAA,CAAAC,iBAAiB,GAAAA,iBAAA;AAWvB,IAAMa,iBAAiB,GAAG,SAAAA,CAACC,WAAwB,EAAEC,QAAkC;EAAlC,IAAAA,QAAA;IAAAA,QAAA,GAAWhC,WAAA,CAAAiC,uBAAuB;EAAA;EAC5F,IAAMC,IAAI,GAAG,SAAAA,CAAA;IAAM,OAAAH,WAAW,CAAC/B,WAAA,CAAAmC,mBAAmB,CAAC;EAAhC,CAAgC;EAEnD,OAAOvB,MAAM,CAACwB,WAAW,CAACF,IAAI,EAAEF,QAAQ,CAAC;AAC3C,CAAC;AAJYhB,OAAA,CAAAc,iBAAiB,GAAAA,iBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}